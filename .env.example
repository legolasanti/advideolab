# Backend (API)
NODE_ENV=development
PORT=4000

# When running locally without Docker, use localhost.
# When running via docker-compose, use service hosts (db/minio).
DATABASE_URL=postgresql://app:${POSTGRES_PASSWORD}@db:5432/app?schema=public

# 32+ chars (recommended: generate with `openssl rand -hex 32`)
JWT_SECRET=REPLACE_WITH_RANDOM_HEX_64_CHARS
# JWT expiry: safe default is 1h in ALL environments
# Allowed range: 15m to 24h (e.g., "30m", "2h", "1d" up to 24h max)
JWT_EXPIRES_IN=1h
JWT_ISSUER=
JWT_AUDIENCE=
JWT_ENFORCE_ISS_AUD=false
REFRESH_TOKEN_TTL_DAYS=30

S3_ENDPOINT=http://minio:9000
S3_BUCKET=assets
S3_ACCESS_KEY=${MINIO_ROOT_USER}
S3_SECRET_KEY=${MINIO_ROOT_PASSWORD}
PUBLIC_CDN_BASE=http://localhost:9000/assets
S3_OBJECT_ACL=public-read

API_PUBLIC_URL=http://localhost:4000
WEB_BASE_URL=http://localhost:4173

# Optional compose microservice (if USE_CLOUDINARY=false)
COMPOSE_SERVICE_URL=http://compose:7000/compose
COMPOSE_INTERNAL_TOKEN=REPLACE_WITH_LONG_RANDOM_SECRET

USE_CLOUDINARY=false
CLOUDINARY_CLOUD_NAME=
CLOUDINARY_API_KEY=
CLOUDINARY_API_SECRET=

N8N_SYNC=false
N8N_INTERNAL_TOKEN=REPLACE_WITH_LONG_RANDOM_SECRET            # 32+ chars; shared secret for legacy callbacks (see docs)
N8N_HOST_ALLOWLIST=                                          # optional: comma-separated (e.g. n8n.example.com,*.n8n.example.com)
N8N_TRUSTED_HOST_ALLOWLIST=                                  # optional: required if USE_CLOUDINARY=true (prevents leaking global Cloudinary secrets)
OUTPUT_DOWNLOAD_HOST_ALLOWLIST=                               # optional, comma-separated (e.g. cdn.example.com,*.cloudinary.com)

# Comma-separated allowlist (prod). Defaults to WEB_BASE_URL origin.
ALLOWED_ORIGINS=http://localhost:4173

# IMPORTANT: only enable when you are behind a trusted reverse proxy that strips incoming X-Forwarded-* headers.
TRUST_PROXY=0

# Security toggles
ALLOW_CALLBACK_TOKEN_QUERY=false

BLOG_PREVIEW_TOKEN=                                           # optional: 32+ chars; enables draft preview via /api/public/blog/:slug?previewToken=...

# 32-byte base64 key for AES-256-GCM (generate with `openssl rand -base64 32`)
ENCRYPTION_KEY=REPLACE_WITH_BASE64_32_BYTE_KEY

# Error tracking (optional)
SENTRY_DSN=
SENTRY_ENVIRONMENT=production
SENTRY_TRACES_SAMPLE_RATE=0.1

# Seed behavior (destructive reset requires explicit opt-in)
ALLOW_PROD_SEED=false
SEED_RESET=false
SEED_TEST_TENANTS=true

# Seed super admin (only used during first-time setup)
SEED_OWNER_EMAIL=admin@yourdomain.com
SEED_OWNER_PASSWORD=REPLACE_WITH_STRONG_PASSWORD

# Docker / infra defaults (used by docker-compose)
POSTGRES_DB=app
POSTGRES_USER=app
POSTGRES_PASSWORD=REPLACE_WITH_STRONG_DB_PASSWORD
MINIO_ROOT_USER=minio
MINIO_ROOT_PASSWORD=REPLACE_WITH_STRONG_MINIO_PASSWORD
N8N_BASIC_AUTH_USER=admin
N8N_BASIC_AUTH_PASSWORD=REPLACE_WITH_STRONG_PASSWORD
# N8N UI IP allowlist for Caddy reverse proxy (comma-separated IPs/CIDRs)
# Example: "203.0.113.10,198.51.100.0/24" for specific IPs
# Use "private_ranges" to allow only private network access
# Leave empty to allow all (not recommended for production)
N8N_ALLOWED_IPS=private_ranges

# Frontend (Vite)
VITE_API_BASE=/api
VITE_SITE_URL=https://example.com
